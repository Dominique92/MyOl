<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>My Openlayers</title>
	<link rel="icon" type="image/x-icon" href="https://openlayers.org/assets/theme/img/favicon.ico" />

	<!-- Openlayers -->
	<link  href="../ol/ol.css" type="text/css" rel="stylesheet">
	<script src="../ol/ol.js"></script>

	<!-- Recherche par nom -->
	<link  href="../geocoder/ol-geocoder.css" type="text/css" rel="stylesheet">
	<script src="../geocoder/ol-geocoder-debug.js"></script>

	<!-- Proj4 projections Swiss & UK -->
	<script src="../proj4/proj4-src.js"></script>

	<!-- My Openleyers -->
	<link  href="../myol.css" type="text/css" rel="stylesheet">
	<script src="../myol.js"></script>

	<style>
		#map {
			width: 600px;
			height: 400px;
		}
		.label-overpass {
			background: #cde;
		}
	</style>
</head>
<body>
	<div id="map"></div>

	<ul>
		<li><input type="checkbox" name="overpass" checked="checked" id="point_eau" value='["amenity"="drinking_water|watering_place|fountain"]+["waterway"="water_point"]+["natural"="spring"]+["man_made"="water_well"]' />Point d'eau</li>
		<li><input type="checkbox" name="overpass" checked="checked" id="telephone" value='["amenity"="telephone"]' />Cabines téléphoniques</li>
		<li><input type="checkbox" name="overpass" checked="checked" id="wifi" value='["internet_access"~"yes|public|wlan|wired|terminal|service|free|fee|type|access"]' />Café internet</li>
		<li><input type="checkbox" name="overpass" checked="checked" id="ravitaillement" value='["shop"~"supermarket|convenience"]' />Ravitaillement</li>
		<li><input type="checkbox" name="overpass" id="parking" value='["amenity"="parking"]["access"!="private"]' />Parking</li>
	</ul>

	<script>
		var layers = {
				'OSM': layerOSM('//{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png'),
				'IGN': layerIGN('d27mzh49fzoki1v3aorusg6y', 'GEOGRAPHICALGRIDSYSTEMS.MAPS'),
				'Topo': layerIGN('d27mzh49fzoki1v3aorusg6y', 'GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN-EXPRESS.CLASSIQUE'),
				'Cadastre': layerIGN('d27mzh49fzoki1v3aorusg6y', 'CADASTRALPARCELS.PARCELS', 'image/png'),
				'Photos': layerGoogle('s')
			},
			controls = [
				new ol.control.Zoom(),
				new ol.control.FullScreen({
					label: '',
					labelActive: '',
					tipLabel: 'Plein écran'
				}),
				new Geocoder('nominatim', {
					provider: 'osm',
					lang: 'FR',
					keepOpen: true,
					placeholder: 'Saisir un nom' // Initialization of the input field
				}),
				controlLayersSwitcher(layers),
				new ol.control.ScaleLine(),
				new ol.control.MousePosition({
					coordinateFormat: ol.coordinate.createStringXY(5),
					projection: 'EPSG:4326',
					className: 'ol-coordinate',
					undefinedHTML: String.fromCharCode(0)
				}),
				new ol.control.Attribution({
					collapsible: false // Attribution always open
				})
			],
			overpass = layerOverpass({
				url: '//overpass-api.de/api/interpreter',
				selector: 'overpass',
				labelClass: 'label-overpass',
				iconUrlPath : '//dc9.fr/chemineur/ext/Dominique92/GeoBB/types_points/',
			}),
			map = new ol.Map({
				target: 'map',
				view: new ol.View({
					center: ol.proj.fromLonLat([6, 44.5]),
					zoom: 12
				}),
				controls: controls,
				layers: [overpass]
			});
	</script>
</body>
</html>
